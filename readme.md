Назначение сервиса:
Сервис уведомлений отвечает за централизованную обработку всех уведомлений, предназначенных для конечных пользователей (пациентов, врачей, администраторов). Он обеспечивает планирование, доставку, контроль статуса и отмену уведомлений по различным каналам связи.

Ключевые функции
1. Планирование уведомления (Schedule Delivery)
Что делает:
Позволяет системе или пользователю заранее назначить отправку уведомления на определённое время и через конкретный канал связи (SMS, Email, Telegram и др.).

Когда используется:

При создании напоминания о визите.

Для отправки аналитических или служебных сообщений по расписанию.

При автоматической генерации уведомлений из других систем (например, CRM).

Бизнес-логика:

Уведомление можно запланировать заранее, указав способ доставки и получателя.

Система гарантирует попытку доставки в запланированное время.

Повторные уведомления — отдельные сущности.

2. Подтверждение доставки (Mark as Delivered)
Что делает:
Фиксирует факт успешной доставки уведомления получателю. Основано на подтверждении от канала связи (например, SMS-провайдера).

Когда используется:

Когда провайдер связи сообщает, что сообщение получено.

При получении технического подтверждения доставки (например, "прочитано", "доставлено").

Бизнес-логика:

Система обновляет статус уведомления и фиксирует время доставки.

Успешная доставка может влиять на отчёты, SLA, поведение повторных уведомлений.

3. Отмена уведомления (Cancel Notification)
Что делает:
Позволяет отменить ранее запланированное уведомление до его фактической отправки.

Когда используется:

Когда отменяется событие, к которому привязано уведомление (например, при отмене визита).

При изменении условий, делающих уведомление неактуальным.

По запросу пользователя или другой системы.

Бизнес-логика:

Уведомление должно находиться в состоянии ожидания.

После отмены уведомление не отправляется, но факт отмены сохраняется для аудита.

Причина отмены может использоваться для аналитики и диагностики.

